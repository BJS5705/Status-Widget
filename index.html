<table style="background-color: #1F2127; width: 145px; height: 100px; border: solid #000000 1px; border-radius: 10px; font-family: malgun gothic, Segoe UI, Helvetica, Arial, Sans-Serif;">
    <tbody>
        <tr>
            <td align="left" style="padding: 5px;">
                <img src="https://avatars.akamai.steamstatic.com/cb56471b6bbb734d48054000ceaba827e2776cf3_full.jpg" alt="Profile Image" style="width: 50px; height: 50px; border-radius: 10px; border: solid 1px #000000;" />
            </td>
            <td align="left" style="color: white; vertical-align: middle; padding-left: 5px;">
                <b>HEAVEN</b>
                <div style="font-size: 10px; color: #CCCCCC;">스팀접속상태</div>
            </td>
        </tr>
        <tr>
            <td colspan="2" align="center" style="color: white;">
                <div id="steam-status" style="font-size: 14px; margin-top: 10px;">상태를 확인 중...</div>
                <div id="game-info" style="font-size: 12px; color: #CCCCCC; display: none;">게임 정보를 불러오는 중...</div> <!-- 게임 정보 표시 -->
            </td>
        </tr>
    </tbody>
</table>

<script>
    async function fetchSteamStatus() {
        const apiKey = '8B003B5D78AC09470503063713080EB0';
        const steamId = '76561198055079301';
        const url = `https://cors-anywhere.herokuapp.com/https://api.steampowered.com/ISteamUser/GetPlayerSummaries/v2/?key=${apiKey}&steamids=${steamId}`;

        try {
            const response = await fetch(url);
            const data = await response.json();
            const player = data.response.players[0];
            const personastate = player.personastate;
            const gameId = player.gameid;  // 게임 ID
            const gameExtraInfo = player.gameextrainfo; // 게임 정보

            let statusText = '';
            let statusColor = 'white'; // 기본 색상

            // 상태 처리 로직
            switch (personastate) {
                case 0:
                    statusText = '오프라인';
                    break;
                case 1:
                    statusText = '온라인';
                    statusColor = '#6BCAF1'; // 온라인 상태일 때 색상
                    break;
                case 5:
                    statusText = '게임 중';
                    statusColor = '#8EBF56'; // 게임 중 상태일 때 색상
                    break;
                default:
                    statusText = '온라인';
                    statusColor = '#6BCAF1'; // 다른 상태도 온라인 색상으로 표시
            }

            const statusElement = document.getElementById('steam-status');
            statusElement.innerText = statusText;
            statusElement.style.color = statusColor; // 텍스트 색상 설정
            statusElement.style.fontWeight = (personastate === 1 || personastate === 5) ? 'bold' : 'normal'; // 온라인/게임 중일 경우 굵게

            // 게임 중일 때만 추가 정보 표시
            if (personastate === 5 && gameExtraInfo) {
                const gameInfoElement = document.getElementById('game-info');
                gameInfoElement.innerText = `게임 중: ${gameExtraInfo}`; // 게임 이름 표시
                gameInfoElement.style.display = 'block'; // 게임 정보 표시
            } else {
                document.getElementById('game-info').style.display = 'none'; // 게임 정보 숨김
            }

        } catch (error) {
            console.error('Error fetching Steam status:', error);
            document.getElementById('steam-status').innerText = '불러오기 실패';
        }
    }

    fetchSteamStatus();
</script>
